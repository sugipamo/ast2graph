# データ構造実装開始計画

## 実施日時
2025年7月2日 23:59

## 目的
ast2graphプロジェクトの基盤となるデータ構造を実装し、後続の機能開発の土台を構築する

## 実装対象
### 1. models.py
- ASTGraphNodeデータクラス
- ASTGraphEdgeデータクラス
- EdgeType列挙型
- 基本的なバリデーション

### 2. graph_structure.py
- GraphStructureクラス
- SourceInfoデータクラス
- グラフ操作の基本メソッド

## 実装手順

### ステップ1: プロジェクト構造の準備
1. src/ast2graph/models.py を作成
2. src/ast2graph/graph_structure.py を作成
3. src/ast2graph/exceptions.py を作成（エラー階層用）

### ステップ2: 基本データクラスの実装
1. EdgeType列挙型の定義
2. ASTGraphNodeの実装
   - UUID生成ロジック
   - 必須フィールドの検証
3. ASTGraphEdgeの実装
   - エッジタイプの検証
   - ソース/ターゲットIDの検証

### ステップ3: グラフ構造の実装
1. SourceInfoクラスの実装
2. GraphStructureクラスの実装
   - add_node, add_edgeメソッド
   - get_node, get_edges_from, get_edges_toメソッド
   - validateメソッド（グラフの整合性チェック）

### ステップ4: 例外クラスの定義
1. AST2GraphError（基底クラス）
2. ValidationError
3. NodeNotFoundError

### ステップ5: 単体テストの作成
1. tests/unit/test_models.py
2. tests/unit/test_graph_structure.py
3. 基本的な動作確認テスト

## 検証項目
- [ ] データクラスが正しくインスタンス化できる
- [ ] 必須フィールドの検証が機能する
- [ ] グラフ操作メソッドが正常に動作する
- [ ] 型ヒントが正しく設定されている
- [ ] テストがすべてパスする

## 期待される成果
- 堅牢なデータ構造の基盤
- 後続の開発がスムーズに進められる土台
- 型安全性の確保
- テスト可能なコード

## 次のステップ
データ構造の実装が完了したら、parser.pyの実装に進む